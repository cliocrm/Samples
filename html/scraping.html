
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">

  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, height=device-height, shrink-to-fit=yes">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>



<style>

.glass-panel {

  color: #fff;

  margin: 40px auto;

  background-color: rgba(255,255,255,0.03);

  border: 1px solid rgba(255,255,255,0.1);

  width: 80%;

  border-radius: 15px;

  padding: 32px;

  backdrop-filter: blur(10px);

}



.glass-button {

  display: inline-block;

  padding: 24px 32px;

  border: 0;

  text-decoration: none;

  border-radius: 15px;

  background-color: rgba(255,255,255,0.1);

  border: 1px solid rgba(255,255,255,0.1);

  backdrop-filter: blur(30px);

  color: rgba(255,255,255,0.8);

  font-size: 14px;

  letter-spacing: 2px;

  cursor: pointer;

  text-transform: uppercase;

}



.glass-button:hover {

  background-color: rgba(255,255,255,0.2);

}



body {

  background: url(https://images.unsplash.com/photo-1608602495869-abcaeed58900?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=870&q=80) no-repeat center center fixed;

  -webkit-background-size: cover;

  -moz-background-size: cover;

  -o-background-size: cover;

  background-size: cover;

  text-align: center;

  font-family: 'Open Sans', sans-serif;

}



.glass-button {

  margin: 15px;

  margin-top: 40px;

}



h1, h1 a {



  width: 100%;

  max-width: 1400px;

  vertical-align: middle;

  text-align: center;

  margin: 20px auto;

  text-decoration: none;

  color: #fff;

  padding-top: 20px;

  color: rgba(255,255,255,0.8);

}



h3 {

  width: 100%;

  margin: 20px auto;

  color: rgba(255,255,255,0.6);

  text-align: left;

  line-height: 150%;

  font-size:3vw;

  word-wrap: break-word;

}



p {

  width: 100%;

  margin: 20px auto;

  padding-bottom: 20px;

  color: rgba(255,255,255,0.6);

  text-align: left;

  line-spacing: 10px;

}



/* If the screen size is 601px wide or more, set the font-size of <div> to 80px */

@media screen and (min-width: 601px) {

  div.example {

    font-size: 80px;

  }

}



/* If the screen size is 600px wide or less, set the font-size of <div> to 30px */

@media screen and (max-width: 600px) {

  div.example {

    font-size: 30px;

  }

}





.topnav {

  overflow: hidden;

  background-color: rgba(0,0,0,0.1);

}



.topnav a {

  float: left;

  display: block;

  color: #f2f2f2;

  text-align: center;

  padding: 14px 16px;

  text-decoration: none;

  font-size: 17px;

}



.topnav a:hover {

  background-color: #ddd;

  color: black;

}



.topnav a.active {

  color: white;

}



.topnav .icon {

  display: none;

}



@media screen and (max-width: 600px) {

  .topnav a:not(:first-child) {display: none;}

  .topnav a.icon {

    float: right;

    display: block;

  }

}



@media screen and (max-width: 600px) {

  .topnav.responsive {position: relative;}

  .topnav.responsive .icon {

    position: absolute;

    right: 0;

    top: 0;

  }

  .topnav.responsive a {

    float: none;

    display: block;

    text-align: left;

  }

}



</style>

<body>

<div class="topnav" id="myTopnav">

  <a href="articles.html">Articles</a>

  <a href="index.html">Portfolio</a>

  <a href="summary.html" >Cliosuite</a>

  <a href="javascript:void(0);" class="icon" onclick="myFunction()">

    <i class="fa fa-bars"></i>

  </a>

</div>

    <div class="bg-image"></div>

<div class="glass-panel">
  <h3 style="font-size:3.5vw;color:white;">Scraping Web Data for Testing Ideas</h3>
<h3>
Scraping data from the web is useful for many engineers, consultants, and product managers for their research and development of products. I had mentioned in the blog for a minimalist approach for UI design that I used web scraping for reducing the product detail page to a lesser number of attributes and information about a product. While that was for visual representation, such data can also be used for analysis, POCs, and user or market research. One example is from a requirement of a group of consultants who work at a bank and wanted me to help them get tick data which was price fluctuations of a type of financial product that is open to the public but the owners of the data did not have APIs for consumption by developers. Hence these consultants had to use a web scraping tool. There can be similar applications for a wide range of applications for visually representing data to present a business case.
<br/>Find the script <a href="https://github.com/cliosight-software/Samples/tree/main/utilities" style="color:lightblue;">here</a>.<br/>
To start with, Python is good programming and scripting language with packages for this purpose: BeautifulSoup (you can also use Selenium). And to structure the solution, there can be a database for storing the data for analysis or a flat file as a source and output of the analysis like graphs, charts, or simply a data table of the results of processing. In fact, it is possible to import it to an excel sheet, and then further operations can be performed by someone who is comfortable with Excel. The scraping tasks like the mentioned requirement can also be put into a cron job to run in the background at regular intervals. In this blog post, I will only provide the script for scraping.<br/>
A word of caution: it is important to not overwhelm the servers of the hosting website or web application with repeated calls with the web scrapper. Hence, we should leave a gap of a few seconds in between each call. This can be implemented in a cron job script if used as a batch operation. If this is not done, your IP could be blocked and there could be other actions also. It is ideal to inform the company that you need the data and to request their tech team to develop the API for you. The best way is to inform your higher management about this business need.<br/>
To demonstrate, I stored the URLs into an Excel sheet to analyze and this is a manual step since I had to pick a product URL selectively. This part can also be automated with web crawling:<br/>
<img src="scrap0.jpeg" style="width:100%;"><br/>
Now we can look at the script to be run locally on a macosx computer.<br/>
The script will take either the timestamp or --n option (for new product list stored in an excel sheet). You will only add the product URLs to this sheet. No code changes are needed for this.<br/>
You can run the script as:<br/>
python scraping_sample.py 20190503_165432 <br/>
This will show you the result for the timestamp 20190503_165432 which is the <date>_<time> format of the system time.<br/>
python scraping_sample.py --n<br/>
This is for a new set of URLs and the name of the excel sheet or any other flat file can be changed in the script. This is shown below:<br/>
 
loc = ("~/snapdeal.xlsx") is the line to be changed.<br/>
The next part is to open the sheet and loop through each line and scrape the data needed.<br/>
 
 
In the later part, the --n option will drop the existing table storing the data and then create the table again.<br/>
<img src="scrap5.jpeg" style="width:100%;"><br/>
The database used here is MySQL. I created a database "snapdeal" with a user id and password and used that in the script. This is assuming that the developer knows the use of MySQL and simple queries.<br/>
On running the script we get the following results, which verifies that the parameters are being fetched properly and the data inserted.<br/>
<img src="scrap6.jpeg" style="width:100%;"><br/>
A simple database query can be used to fetch and analyze the result. The timestamp in the select query is the time when the table was first created meaning it corresponds to a particular set of URLs used for the analysis. The timestamp in the result is the time of running the script to fetch the prices of products 1 to 20.<br/>
<img src="scrap7.jpeg" style="width:100%;"><br/>
Similarly, for fetching the reviews for a product used for my use case, we simply call the API  
https://www.snapdeal.com/acors/web/getReviewsAndRatings/v2
 and for Q&A: https://www.snapdeal.com/acors/web/getQuestionsAndAnswers/v2<br/>
These can be tested as:  <br/>
python3 scrape_snapdealprod_reviews.py https://www.snapdeal.com/product/micromax-32t6175hd-8128-cm-32/654872041826<br/>
The resultant HTML for reviews will be formed as given below and can be appended to the product HTML.<br/>
<img src="scrap8.jpeg" style="width:100%;">
</h3>
</div>
<script>
function myFunction() {
  var x = document.getElementById("myTopnav");
  if (x.className === "topnav") {
    x.className += " responsive";
  } else {
    x.className = "topnav";
  }
}
</script>
</body>
</html>

