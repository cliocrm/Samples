<VirtualHost *:80>
	ServerName cliocrm.co
	ServerAlias www.cliocrm.co
	ServerAdmin webmaster@localhost
	
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	RewriteEngine On
	RewriteCond %{HTTPS} off
	RewriteRule {.*} https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</VirtualHost>

<VirtualHost *:80>
	ServerName cliocrm.co
	ServerAlias www.cliocrm.co
	ServerAdmin webmaster@localhost
	
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	#RewriteEngine On
	#RewriteCond %{HTTPS} off
	#RewriteRule {.*} https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
	
	Redirect permanent /cliocrm/ https://cliocrm.co/cliocrm/
	
</VirtualHost>

<VirtualHost *:80>
	ServerName cliocrm.co
	ServerAlias www.cliocrm.co
	ServerAdmin webmaster@localhost
	
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	#RewriteEngine On
	#RewriteCond %{HTTPS} off
	#RewriteRule {.*} https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
	
	Redirect permanent /login/ https://cliocrm.co/login/
	
</VirtualHost>

<VirtualHost *:80>
	ServerName cliocrm.co
	ServerAlias www.cliocrm.co
	ServerAdmin webmaster@localhost
	
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	#RewriteEngine On
	#RewriteCond %{HTTPS} off
	#RewriteRule {.*} https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
	
	Redirect permanent /register/ https://cliocrm.co/register/
	
</VirtualHost>

<IfModule mod_ssl.c>
	<VirtualHost *:443>
		ServerName cliocrm.co
		ServerAlias www.cliocrm.co
		ServerAdmin webmaster@localhost

		SSLEngine On
		SSLCertificateKeyFile /etc/letsencrypt/live/cliocrm.co/privkey.pem
		SSLCertificateFile /etc/letsencrypt/live/cliocrm.co/fullchain.pem
		SSLCertificateChainFile /etc/letsencrypt/live/cliocrm.co/chain.pem

		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined
		
		ProxyPreserveHost On
		ProxyPassReverse / http://localhost:3000/
		ProxyPass / http://localhost:3000/

	</VirtualHost>

	<VirtualHost *:443>
		ServerName cliocrm.co
		ServerAlias www.cliocrm.co
		ServerAdmin webmaster@localhost

		SSLEngine On
		SSLCertificateKeyFile /etc/letsencrypt/live/cliocrm.co/privkey.pem
		SSLCertificateFile /etc/letsencrypt/live/cliocrm.co/fullchain.pem
		SSLCertificateChainFile /etc/letsencrypt/live/cliocrm.co/chain.pem

		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined
		
		ProxyPreserveHost On
		ProxyPassReverse /cliocrm/ http://localhost:3000/cliocrm/
		ProxyPass /cliocrm/ http://localhost:3000/cliocrm/

	</VirtualHost>

	<VirtualHost *:443>
		ServerName cliocrm.co
		ServerAlias www.cliocrm.co
		ServerAdmin webmaster@localhost

		SSLEngine On
		SSLCertificateKeyFile /etc/letsencrypt/live/cliocrm.co/privkey.pem
		SSLCertificateFile /etc/letsencrypt/live/cliocrm.co/fullchain.pem
		SSLCertificateChainFile /etc/letsencrypt/live/cliocrm.co/chain.pem

		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined
		
		ProxyPreserveHost On
		ProxyPassReverse /register/ http://localhost:3000/register/
		ProxyPass /register/ http://localhost:3000/register/

	</VirtualHost>
	
		<VirtualHost *:443>
		ServerName cliocrm.co
		ServerAlias www.cliocrm.co
		ServerAdmin webmaster@localhost

		SSLEngine On
		SSLCertificateKeyFile /etc/letsencrypt/live/cliocrm.co/privkey.pem
		SSLCertificateFile /etc/letsencrypt/live/cliocrm.co/fullchain.pem
		SSLCertificateChainFile /etc/letsencrypt/live/cliocrm.co/chain.pem

		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined
		
		ProxyPreserveHost On
		ProxyPassReverse /login/ http://localhost:3000/login/
		ProxyPass /login/ http://localhost:3000/login/

	</VirtualHost>
</IfModule>
